# Priority Queue(우선순위 큐)

먼저 들어온 데이터가 먼저 나가는 일반적인 큐와 다르게 **각 요소마다 우선순위**를 가지며, **높은 우선순위를 가진 요소가 먼저** 처리되는 자료구조이다.

대부분의 언어에서 우선순위 큐는 [**Heap(힙)**](#heap-힙) 자료구조로 구현된다.

### 용어

| **용어** | **설명**                                                                              |
| -------- | ------------------------------------------------------------------------------------- |
| **root** | 우선순위 큐에서 가장 높은 우선순위를 가진 요소 <br>(최소 힙: 최솟값, 최대 힙: 최댓값) |
| **add**  | 우선순위에 따라 요소를 삽입                                                           |
| **poll** | 우선순위가 가장 높은 요소를 **제거**하고 반환                                         |
| **peek** | 우선순위가 가장 높은 요소를 반환                                                      |

### Java의 PriorityQueue 클래스

```java
import java.util.PriorityQueue;

PriorityQueue<자료형> pqueue = new PriorityQueue<>();
```

기본적인 우선순위 큐는 오름차순(최소 힙)으로 정렬된다.<br>

내림차순(최대 힙) 혹은 다른 정렬 방식을 구현하기 위해서는 `Comparator` 혹은 람다식을 이용하는 방법이 있다.<br>

🔗 [백준 11286 절댓값 힙](https://github.com/CHOO-O/CHOO-algorithm/tree/main/%EB%B0%B1%EC%A4%80/Silver/11286.%E2%80%85%EC%A0%88%EB%8C%93%EA%B0%92%E2%80%85%ED%9E%99)

### 주요 메서드

| **메서드명**    | **설명**                                                                |
| --------------- | ----------------------------------------------------------------------- |
| **add(item)**   | 우선순위에 따라 요소를 삽입                                             |
| **offer(item)** | 우선순위에 따라 요소를 삽입 <br> 실패 시 `false` 반환                   |
| **poll()**      | 우선순위가 가장 높은 요소를 **제거** 하고 반환 <br> 없을 시 `null` 반환 |
| **remove()**\*  | 우선순위가 가장 높은 요소를 **제거** 하고 반환                          |
| **peek()**      | 우선순위가 가장 높은 요소를 반환 <br> 없을 시 `null` 반환               |
| **element()**\* | 우선순위가 가장 높은 요소를 반환                                        |
| **isEmpty()**   | 큐가 비어있는지 확인해 `true/false` 반환                                |
| **size()**      | 현재 큐의 요소 개수 반환                                                |
| **clear()**     | 모든 요소 제거                                                          |

> **\*** 표시가 있는 메서드는 큐가 비어있는 상태에서 호출 시 `NoSuchElementException` 예외가 발생한다.

# Heap(힙)

힙은 **완전 이진 트리**의 일종으로, 부모 노드와 자식 노드 간 특정한 우선순위 기준을 만족하는 자료구조이다.

다양한 알고리즘 (다익스트라, 힙 정렬, 우선순위 큐 등) 에서 활용되며, 시간 복잡도는 대부분 `O(logN)`이다.<br>

### 완전 이진 트리의 특징

![Compete binary tree](https://github.com/CHOO-O/CHOO-study/blob/main/Data-structure/assets/Complete-binary-tree.png?raw=true)

🔹 마지막 레벨을 제외하고는 모든 노드가 채워져있어야 한다.<br>
🔹 노드를 삽입할 때 최하단 좌측 노드부터 차례대로 삽입해야 한다.<br>
🔹 각 노드는 최대 2개의 자식 노드를 갖는다.<br>

### 최대 힙(Max Heap)

부모 노드의 값이 자식 노드의 값보다 크거나 같다.<br>

따라서 **루트 노드가 가장 큰 값**을 가진다.<br>

### 최소 힙(Min Heap)

부모 노드의 값이 자식 노드의 값보다 작거나 같다.<br>

따라서 **루트 노드가 가장 작은 값**을 가진다.<br>

### 힙의 구현

힙은 배열을 이용하여 다음과 같은 방식으로 구현된다.<br>

🔹 부모 노드의 인덱스 : `i`<br>
🔹 왼쪽 자식 노드의 인덱스 : `2*i + 1`<br>
🔹 오른쪽 자식 노드의 인덱스 : `2*i + 2`<br>

🔹 자식 노드 인덱스가 `i`일 때 부모 노드의 인덱스 : `(i - 1) / 2`<br>
